---
settings:
  chains:
    relay_chain: &relay_chain
      wsPort: 9900
    assets_parachain: &assets_parachain
      wsPort: 9910
      paraId: &ap_id 1000
    trappist_parachain: &trappist_parachain
      wsPort: 9920
      paraId: &tp_id 2000
    penpal_parachain: &penpal_parachain
      wsPort: 9930
      paraId: &pp_id 3000
  variables:
    common:
      amount: &amount 10000000000000
      amount_fees: &amount_fees 100000000000
      collection_id: &collection_id 1
      item_id: &item_id 7
      bob_item_id: &bob_item_id 77
    chains:
      relay_chain:
        signer: &rc_signer //Alice
        assets_parachain_destination: &ap_dest { v3: { parents: 0, interior: { x1: { parachain: *ap_id }}}}
        assets_parachain_dest_routed: &ap_dest_routed { v3: { parents: 1, interior: { x1: { parachain: *ap_id } }}}
        trappist_parachain_destination: &tp_dest { v3: { parents: 0, interior: { x1: { parachain: *tp_id }}}}
        trappist_parachain_dest_routed: &tp_dest_routed { v3: { parents: 1, interior: { x1: { parachain: *tp_id } }}}
        penpal_parachain_destination: &pp_dest { v3: { parents: 0, interior: { x1: { parachain: *pp_id }}}}
        penpal_parachain_dest_routed: &pp_dest_routed { v3: { parents: 1, interior: { x1: { parachain: *pp_id } }}}
      assets_parachain_account:
        signer: &ap_signer //Alice
        signer_bob: &ap_bob_signer //Bob
        wallet: &ap_wallet HNZata7iMYWmk5RvZRTiAsSDhV8366zq2YGb3tLH5Upf74F
        bob_wallet: &ap_bob_wallet FoQJpPyadYccjavVdTWxpxU7rUEaYhfLCPwXgkfD6Zat9QP
        asset_id: &asset_id 1
        assets_pallet_id: &assets_pallet_id 50
        suff_asset: &suff_asset { concrete: { parents: 0, interior: { x2: [ { PalletInstance: *assets_pallet_id }, { GeneralIndex: *asset_id } ] }}}
        suff_asset_fungible: &ap_suff_asset_fungible { id: *suff_asset, fun: { fungible: *amount_fees }}
      trappist_parachain:
        signer: &tp_signer //Alice
        wallet: &tp_wallet 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY
        bob_signer: &tp_bob_signer //Bob
        bob_wallet: &tp_bob_wallet 5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty
        sovereign_account: &tp_sovereign_sibl FBeL7EAeUroLWXW1yfKboiqTqVfbRBcsUKd6QqVf4kGBySS
        trappist_parachain_account: &tp_acc '0xd43593c715fdd31c61141abd04a99fd6822c8558854ccde39a5684e7a56da27d'
        collection_id_routed: &collection_id_routed { parents: 1, interior: { x2: [ { parachain: *ap_id }, { GeneralIndex: *collection_id } ] }}
      penpal_parachain:
        signer: &pp_signer //Alice
        wallet: &pp_wallet 5GrwvaEF5zXb26Fz9rcQpDWS57CtERHpNehXCPcNoHGKutQY
        bob_wallet: &pp_bob_wallet 5FHneW46xGXgs5mUiveU4sbTyGBzmstUspZC92UhjJM694ty
        penpal_parachain_bob_account: &pp_bob_acc '0x8eaf04151687736326c9fea17e25fc5287613693c912909cb226aa4794f26a48'

tests:
  - name: HRMP
    describes:
      - name: Creating a Collections in Assets Parachain and Trappist Parachain, .
        its:
          - name: A Uniques Collection should exist in the Assets Parachain
            actions:
              - extrinsics:
                - chain: *assets_parachain
                  signer: *ap_signer
                  pallet: uniques
                  call: create
                  args: [
                    *collection_id,
                    { id: *ap_wallet }, # owner
                  ]
                  events:
                    - name: uniques.Created

          - name: A "Foreign" Uniques Collection should exist in the Trappist Parachain (mirroring Assets's)
            actions:
              - extrinsics:
                - chain: *trappist_parachain
                  signer: *tp_signer
                  sudo: true
                  pallet: foreignUniques
                  call: forceCreate
                  args: [
                    *collection_id_routed,
                    { id: *tp_wallet }, # owner
                    false, # freeHolding
                  ]
                  events:
                    - name: foreignUniques.ForceCreated

          - name: An NFT should be minted in Assets for the Trappist Sovereign Account.
            actions:
              - extrinsics:
                - chain: *assets_parachain
                  signer: *ap_signer
                  pallet: uniques
                  call: mint
                  args: [
                    *collection_id,
                    *item_id,
                    { id: *tp_sovereign_sibl }, # owner
                  ]
                  events:
                    - name: uniques.Issued

          - name: An NFT should be minted in Assets for Bob Account.
            actions:
              - extrinsics:
                - chain: *assets_parachain
                  signer: *ap_signer
                  pallet: uniques
                  call: mint
                  args: [
                    *collection_id,
                    *bob_item_id,
                    { id: *ap_bob_wallet }, # owner
                  ]
                  events:
                    - name: uniques.Issued
